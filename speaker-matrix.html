<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Speaker Matrix</title>
    <style>
      body {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        margin: 0;


        font-family: sans-serif;
        gap: 1rem;
      }

      canvas {
        border: 4px solid #f5f5f5;
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4);
      }
    </style>
  </head>

  <body>
    <h1>Speaker Matrix</h1>
    <canvas id="speakerCanvas"></canvas>
    <button id="exportBtn"
      style="padding: 10px 20px; font-size: 16px; background: #007acc; color: white; border: none; border-radius: 4px; cursor: pointer;">Export
      as JPG</button>

    <script>
      const TILE_WIDTH = 240;
      const TILE_HEIGHT = 240;
      const COLUMNS = 4;
      const ROWS = 2;

      const imageUrls = [
        './assets/speakers/hannah-duo.jpg',
        './assets/speakers/asim-duo.jpg',
        './assets/speakers/sacha-duo.jpg',
        './assets/speakers/surya-duo.jpg',
        './assets/speakers/hellen-duo.jpg',
        './assets/speakers/jessica-eda-duo.jpg',
        './assets/speakers/chetan-duo.jpg',
        './assets/speakers/serges-duo.jpg',
      ];

      const canvas = document.getElementById('speakerCanvas');
      canvas.width = TILE_WIDTH * COLUMNS;
      canvas.height = TILE_HEIGHT * ROWS;
      const ctx = canvas.getContext('2d');

      function drawMatrix(images) {
        images.forEach((image, index) => {
          const column = index % COLUMNS;
          const row = Math.floor(index / COLUMNS);
          const x = column * TILE_WIDTH;
          const y = row * TILE_HEIGHT;
          ctx.drawImage(image, x, y, TILE_WIDTH, TILE_HEIGHT);
        });
      }

      async function loadImages(urls) {
        const loaders = urls.map(
          url =>
            new Promise((resolve, reject) => {
              const img = new Image();
              img.crossOrigin = 'anonymous';
              img.onload = () => resolve(img);
              img.onerror = () => reject(new Error(`Failed to load ${url}`));
              img.src = url;
            })
        );

        return Promise.all(loaders);
      }

      loadImages(imageUrls)
        .then(drawMatrix)
        .catch(error => {
          console.error(error);
          ctx.fillStyle = '#f5f5f5';
          ctx.font = '20px sans-serif';
          ctx.fillText('Failed to load images', 20, TILE_HEIGHT);
        });

      // Export functionality
      document.getElementById('exportBtn').addEventListener('click', function () {
        const link = document.createElement('a');
        link.download = 'speaker-matrix.jpg';
        link.href = canvas.toDataURL('image/jpeg', 0.9);
        link.click();
      });
    </script>
  </body>

</html>